#### TCP 的拥塞避免机制

拥塞：对资源的需求超过了可用的资源。若网络中许多资源同时供应不足，网络的性能就要明显变坏，整个网络的吞吐量随之负荷的增大而下降。

拥塞控制：防止过多的数据注入到网络中，使得网络中的路由器或链路不致过载。

拥塞控制的方法：
1.慢启动 + 拥塞避免：
**慢启动：** 不要一开始就发送大量的数据，先探测一下网络的拥塞程度，也就是说由小到大逐渐增加拥塞窗口的大小;
**拥塞避免：** 拥塞避免算法让拥塞窗口缓慢增长，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍，这样拥塞窗口按线性规律缓慢增长。
[![image](https://user-images.githubusercontent.com/20238022/69872165-abfa1b00-12ef-11ea-8d6e-b04e67fef36a.png)](https://user-images.githubusercontent.com/20238022/69872165-abfa1b00-12ef-11ea-8d6e-b04e67fef36a.png)

2.快重传 + 快恢复
**快重传：** 快重传要求接收方在收到一个 失序的报文段 后就立即发出 重复确认（为的是使发送方及早知道有报文段没有到达对方）而不要等到自己发送数据时捎带确认。快重传算法规定，发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期。
[![image](https://user-images.githubusercontent.com/20238022/69872203-c2a07200-12ef-11ea-8d58-1da4b24f5163.png)](https://user-images.githubusercontent.com/20238022/69872203-c2a07200-12ef-11ea-8d58-1da4b24f5163.png)

**快恢复：** 快重传配合使用的还有快恢复算法，当发送方连续收到三个重复确认时，就执行“乘法减小”算法，把ssthresh门限减半，但是接下去并不执行慢开始算法：因为如果网络出现拥塞的话就不会收到好几个重复的确认，所以发送方现在认为网络可能没有出现拥塞。所以此时不执行慢开始算法，而是将cwnd设置为ssthresh的大小，然后执行拥塞避免算法。

[![image](https://user-images.githubusercontent.com/20238022/69872247-da77f600-12ef-11ea-899c-c8b75097a5f5.png)](https://user-images.githubusercontent.com/20238022/69872247-da77f600-12ef-11ea-899c-c8b75097a5f5.png)