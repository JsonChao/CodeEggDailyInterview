#### AOT和JIT以及混合编译的区别、优劣

##### 参考答案

AOT和JIT是什么？
AOT,即Ahead-of-time,指预先编译.
JIT,即Just-In-Time,指即时编译.

区别:
主要区别在于是否在“运行时”进行编译.

优劣:
AOT优点：
1.在程序运行前编译,可以避免在运行时的编译性能消耗和内存消耗.
2.可以在程序运行初期就达到最高性能.
3.可以显著的加快程序的启动.
AOT缺点：
1.在程序运行前编译会使程序安装的时间增加.
2.牺牲Java的一致性.
3.将提前编译的内容保存会占用更多的外存.

JIT优点：
1.可以根据当前硬件情况实时编译生成最优机器指令(ps:AOT也可以做到,在用户使用是使用字节码根据机器情况在做一次编译).
2.可以根据当前程序的运行情况生成最优的机器指令序列.
3.当程序需要支持动态链接时,只能使用JIT.
4.可以根据进程中内存的实际情况调整代码,使内存能够更充分的利用.
JIT缺点：
1.编译需要占用运行时资源,会导致进程卡顿.
2.由于编译时间需要占用运行时间,对于某些代码的编译优化不能完全支持,需要在程序流畅和编译时间之间做权衡.
3.在编译准备和识别频繁使用的方法需要占用时间,使得初始编译不能达到最高性能.

混合编译:
Android N引入了使用编译+解释+JIT的混合运行时,以获得安装时间,内存占用,电池消耗和性能之间的最佳折衷.
优点:
即使是大型应用程序的安装时间也减少到几秒钟.
系统更新安装得更快,因为它们不需要优化步骤.
应用程序的RAM占用空间较小,在某些情况下降至50％.
改善了表现.
降低电池消耗.

参考:
https://source.android.com/devices/tech/dalvik
https://www.infoq.com/news/2016/03/android-n-aot-jit
https://player.fm/series/android-developers-backstage-1245114/episode-45-state-of-the-art